<!DOCTYPE HTML>
<html>
    <head>
        <title>Vision 2021</title>
        <meta charset="UTF-8">
        <link href="test.css" rel="stylesheet" type="text/css">
        <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1, user-scalable=yes,initial-scale=1.0" />
    </head>


    <body style="margin:0px; background-Color: #EBE8E4;">
        
        <a href="index.html" id="sub-title">
        PORTFOLIO
        </a>
        
        <button id='modebutton' onclick="themetoggle()">
        🌖 
        </button>

        <ul id="list1">
        <div id="grid">
            <div>
            <li>
            <a href="uplist1.html" title="What is HTML?" id="uplist">
            What is HTML?</a>
            </li>
            </div>
            <div>
            <li>
            <a href="uplist2.html" title="HTML Tag?" id="uplist">
            HTML Tag</a>
            </li>
            </div>
            <div>
            <li>
            <a href="uplist3.html" title="My Vision 2022" id="uplist">
            My Vision 2022</a>
            </li>
            </div>
        </div>
        </ul>

        <script>
        var mode = document.querySelector('body').style;
        var title = document.querySelector('#sub-title').style;
        var list = document.querySelector('#list1').style;
        var change = document.getElementById('modebutton');
            function themedark() {
                mode.backgroundColor='#BEBABF';
                mode.color='black';
                mode.transition = '.5s background, .4s color';
                title.backgroundColor = '#171C26';
                title.color = 'white';
                title.transition = '.5s background, .4s color';
                list.backgroundColor = '#747C8C';
                list.color='white';
                list.transition = '.5s background, .4s color';
                localStorage.setItem('theme', 'themedark');
            }
            function themelight() {
                mode.backgroundColor='#EBE8E4';
                mode.color='black';
                mode.transition = '.5s background, .4s color';
                title.backgroundColor = '#BACAC0';
                title.color = 'black';
                title.transition = '.5s background, .4s color';
                list.backgroundColor = '#193b59';
                list.color='white';
                list.transition = '.5s background, .4s color';
                localStorage.setItem('theme', 'themelight');
            }
            function themetoggle(){
                if(localStorage.getItem('theme')==='themedark'){
                    themelight();
                    change.innerHTML = '🌖';
                }else{
                    themedark();
                    change.innerHTML = '☀️';
                }
            }
            
            if(localStorage.getItem('theme')==='themedark'){
                    themedark();
                    change.innerHTML = '☀️';
                }else{
                    themelight;
                    change.innerHTML = '🌖';
                }
            
        </script>
        
        <p style = "text-align: center">
        To Do List
        <p>
        <form class="js-todoform">
                <input type="text"  placeholde = 'Write'/>
        </form>        


        <ul class="js-todolist">
        </ul>
        
        <script>
        const todoform = document.querySelector(".js-todoform");
        const todoinput = todoform.querySelector("input"); //input 태그이름을 가지는 todoform에서
        const todolist = document.querySelector(".js-todolist");
 
        const TODO_LS = "todo";
 
        let todos = []; // 할일을 저장할 배열

        function deletetodo(event){
                 //.target : 타겟의 부모, 여기서는 id를 기준으로 지울거다.
                 const btn = event.target;
                 const li = btn.parentNode;
                 todolist.removeChild(li); //HTML에서만 삭제된다.
                 const cleantodos = todos.filter(function(arr){
            return arr.id !== parseInt(li.id);
                  }); //cleantodos 는 줄어들지만 todos 는 그대로다.
                 //filter는 array의 모든 아이템을 통해 함수를 실행하고\
                 //true인 아이템들만 가지고 새로운 array를 만듬
         todos = cleantodos;
          savetodo();
        }
 
        function savetodo(){
          localStorage.setItem(TODO_LS,JSON.stringify(todos)); 
          //local 스토리지에 저장하기위함, 근데 JS는 string만 저장할 수 있다.
          //그게 JSON stringfy
        }
        
        function painttodo(text){
           const li = document.createElement("li"); //HTML을 우리가 원하는걸 만든다.
           const deletebtn = document.createElement("button");
                 deletebtn.innerText = "삭제";
           
           const Donebtn = document.createElement("button");
                 Donebtn.innerText = "완료";
                 Donebtn.className = 'donebtn';
                 Donebtn.style.backgroundColor = "black"
                 Donebtn.onclick = function(){
                         if(Donebtn.style.backgroundColor === "black"){
                                 Donebtn.style.backgroundColor = "green";
                         }else{
                                 Donebtn.style.backgroundColor = "black";
                         }
                 }           


            const span = document.createElement("span");
            const newID = todos.length+1; // li에 아이디를 주기위함
           deletebtn.addEventListener('click',deletetodo);//클릭했을때 지움
           span.innerText = text;
           li.appendChild(span);
           li.appendChild(deletebtn);
           li.appendChild(Donebtn);
          //비어있는 li에 버튼만들고 sapn도 만들고 li안에 span도 넣고
           //span을 li안에 넣고 버튼을 li안에 넣음
           todolist.appendChild(li);//그리고 이 li를 ul에 넣음
 
          //웹 창에서 엔터를 눌렀을때, 엘리먼트가 만들어짐
          //js로 원하는 태그에 무언가를 만들고 이벤트로서 만듬
           li.id = newID;
          const todoobj = {
              text: text,
              id: newID
          };
           todos.push(todoobj); // 이 객체를 배열에 저장했다.
           savetodo();
        }
 
        function handle(event){
          event.preventDefault();
           const currentval = todoinput.value;
           painttodo(currentval);
           todoinput.value = "";
        }
 
        function loadtodo(){
            const loadtodos = localStorage.getItem(TODO_LS);
            if(loadtodos !== null){
                const parsetodo = JSON.parse(loadtodos); // 오브젝트로 변환
               parsetodo.forEach(function(a) {
                    painttodo(a.text); // 새로고침을 해도 로컬 데이터에 있기때문에 입력값이 계속 뜬다.
                });
            }
        }
 
        function init(){
          loadtodo();
           todoform.addEventListener("submit",handle);
        }
 
init();
        </script>



        
        <ul id="list">
            <li>Support
            <li>Credit
        </ul>
       

    </body>





</html>
